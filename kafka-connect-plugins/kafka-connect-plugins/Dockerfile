# âœ… 0. Kafka Connect ê¸°ë°˜ ì´ë¯¸ì§€
FROM confluentinc/cp-kafka-connect:7.5.0

# ğŸ”‘ 1. ë£¨íŠ¸ ê¶Œí•œìœ¼ë¡œ ë³€ê²½
USER root

# âœ… 2. JDBC Sink Connector ë¨¼ì € ì„¤ì¹˜
RUN confluent-hub install --no-prompt confluentinc/kafka-connect-jdbc:10.7.4

# âœ… 3. MySQL ë“œë¼ì´ë²„ ì„¤ì¹˜ ë° ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ë³µì‚¬
RUN microdnf update -y && \
    microdnf install -y curl tar gzip && \
    curl -L https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-j-8.2.0.tar.gz -o /tmp/mysql-connector.tar.gz && \
    tar -xzf /tmp/mysql-connector.tar.gz -C /tmp && \
    cp /tmp/mysql-connector-j-8.2.0/mysql-connector-j-8.2.0.jar \
       /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc/

# âœ… 4. ê¸°ë³¸ USERë¡œ ë³µê·€
USER appuser

